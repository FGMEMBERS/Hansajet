<?xml version="1.0"?>

<system name="Fuel">

  <channel name="Fuel Pressure 1">

    <!-- create ideal pump output if switch is on and fuel available -->
    <!-- Main Pump -->
    <switch name="/systems/fuel/fuel-pump[3]/pressure-psi">
      <default value="0.0"/>
      <test value="/systems/fuel/fuel-pump[3]/max-pressure-psi">
        /controls/fuel/tank[1]/boost-pump[0] gt 0.5
        /consumables/fuel/tank[1]/level-lbs gt 0.0
      </test>
    </switch>

    <!-- lag filter to build up pressure slowly -->
    <lag_filter name="/systems/fuel/fuel-pump[3]/filtered-pressure-psi">
      <input>/systems/fuel/fuel-pump[3]/pressure-psi</input>
      <c1>0.099</c1>
    </lag_filter>

    <!-- create ideal pump output if switch is on and fuel available -->
    <!-- Aux Pump -->
    <switch name="/systems/fuel/fuel-pump[4]/pressure-psi">
      <default value="0.0"/>
      <test value="/systems/fuel/fuel-pump[4]/max-pressure-psi">
        /controls/fuel/tank[1]/boost-pump[1] gt 0.5
        /consumables/fuel/tank[1]/level-lbs gt 0.0
      </test>
    </switch>

    <!-- lag filter to build up pressure slowly -->
    <lag_filter name="/systems/fuel/fuel-pump[4]/filtered-pressure-psi">
      <input>/systems/fuel/fuel-pump[4]/pressure-psi</input>
      <c1>0.11</c1>
    </lag_filter>

    <!-- add pressure from main and aux pump -->
    <summer name="/engines/engine[0]/fuel-pressure-psi">
      <input>/systems/fuel/fuel-pump[3]/filtered-pressure-psi</input>
      <input>/systems/fuel/fuel-pump[4]/filtered-pressure-psi</input>
    </summer>

  </channel>

  <channel name="Fuel Pressure 2">

    <!-- create ideal pump output if switch is on and fuel available -->
    <!-- Main Pump -->
    <switch name="/systems/fuel/fuel-pump[5]/pressure-psi">
      <default value="0.0"/>
      <test value="/systems/fuel/fuel-pump[5]/max-pressure-psi">
        /controls/fuel/tank[2]/boost-pump[0] gt 0.5
        /consumables/fuel/tank[2]/level-lbs gt 0.0
      </test>
    </switch>

    <!-- lag filter to build up pressure slowly -->
    <lag_filter name="/systems/fuel/fuel-pump[5]/filtered-pressure-psi">
      <input>/systems/fuel/fuel-pump[5]/pressure-psi</input>
      <c1>0.12</c1>
    </lag_filter>

    <!-- create ideal pump output if switch is on and fuel available -->
    <!-- Aux Pump -->
    <switch name="/systems/fuel/fuel-pump[6]/pressure-psi">
      <default value="0.0"/>
      <test value="/systems/fuel/fuel-pump[6]/max-pressure-psi">
        /controls/fuel/tank[2]/boost-pump[1] gt 0.5
        /consumables/fuel/tank[2]/level-lbs gt 0.0
      </test>
    </switch>

    <!-- lag filter to build up pressure slowly -->
    <lag_filter name="/systems/fuel/fuel-pump[6]/filtered-pressure-psi">
      <input>/systems/fuel/fuel-pump[6]/pressure-psi</input>
      <c1>0.098</c1>
    </lag_filter>

    <!-- add pressure from main and aux pump -->
    <summer name="/engines/engine[1]/fuel-pressure-psi">
      <input>/systems/fuel/fuel-pump[5]/filtered-pressure-psi</input>
      <input>/systems/fuel/fuel-pump[6]/filtered-pressure-psi</input>
    </summer>

  </channel>

</system>
